<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book Donation Page</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #e6f0ff; color: #003366; margin:0; padding:0; scroll-behavior:smooth; }
  header { background-color: #3366cc; padding: 20px; text-align: center; color:#fff; }
  header h1{margin:0; font-size:2em;}
  header p{margin:5px 0 0; font-style:italic;}
  .content { max-width:900px; margin:20px auto; padding:0 20px; }
  .book-info,.author-info{ margin-bottom:30px; }
  .book-info h2,.author-info h3{ color:#003366; }
  .donate-button{ display:block; width:250px; margin:20px auto; padding:15px; background-color:#003366; color:#fff; font-size:1.2em; text-align:center; text-decoration:none; border-radius:8px; cursor:pointer; transition:all 0.3s ease; }
  .donate-button:hover{ background-color:#2255aa; }
  .donation-section{ display:none; margin-top:20px; }
  .payment-methods{text-align:center; margin-bottom:20px;}
  .payment-methods button{ margin:5px; padding:10px 20px; font-size:1em; cursor:pointer; border-radius:6px; border:none; color:#fff; background-color:#3366cc; transition: all 0.3s ease; }
  .payment-methods button:hover{ background-color:#2255aa; }
  .wallet-container{text-align:center; margin-bottom:20px; position:relative; background-color:#cce0ff; padding:20px; border-radius:8px; word-break:break-word;}
  .wallet-container img{ width:150px; height:150px; margin-bottom:10px;}
  .wallet-container p{ font-size:0.9em; margin:10px 0;}
  .copy-btn{ cursor:pointer; padding:6px 12px; background-color:#003366; color:#fff; border:none; border-radius:6px; font-size:0.8em; position:absolute; top:10px; right:10px; transition:all 0.3s ease; }
  .copy-btn.copied{ background-color:#2ecc71; transform:scale(1.05);}
  .donor-form{ max-width:400px; margin:0 auto; background-color:#cce0ff; padding:20px; border-radius:8px; }
  .donor-form label{ display:block; margin:10px 0 5px; }
  .donor-form input{ width:100%; padding:8px; border-radius:6px; border:1px solid #003366; }
  .donor-form button{ margin-top:15px; padding:10px; width:100%; border:none; border-radius:6px; background-color:#003366; color:#fff; font-size:1em; cursor:pointer; transition:all 0.3s ease; }
  .donor-form button:hover{ background-color:#2255aa; }
  .confirmation{text-align:center; margin-top:20px; color:green; font-weight:bold; display:none; }
  .custom-alert{ display:none; background-color:#ffcccc; color:#990000; border-left:5px solid #cc0000; padding:10px; margin:10px 0; border-radius:5px; text-align:center;}
</style>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
<header>
  <h1>The Curious Kids Adventure</h1>
  <p>A story for children with autism and learning challenges</p>
</header>

<div class="content">
  <section class="book-info">
    <h2>About the Book</h2>
    <p>This book is designed to bring joy, understanding, and learning to children, especially those with autism and learning challenges. Your support will help fund illustrations and print the first copies for families and schools.</p>
  </section>

  <section class="author-info">
    <h3>Author Autograph</h3>
    <p>María Lis Malter Terrada — Argentine writer and children’s book author. Notable book: <i>Las Aventuras de Sammy</i>.</p>
  </section>

  <a class="donate-button" id="show-donation">Donate Now</a>

  <div class="donation-section" id="donation-section">
    <div class="payment-methods">
      <p>Select your payment method:</p>
      <button data-method="BTC">Bitcoin (BTC)</button>
      <button data-method="USDT">USDT</button>
      <button data-method="ETH">Ethereum (ETH)</button>
      <button data-method="USDC">USDC (ETH)</button>
    </div>

    <div class="wallet-container" id="wallet-container"></div>

    <div class="donor-form">
      <label for="donor-name">Name:</label>
      <input type="text" id="donor-name" placeholder="Enter your name" required>

      <label for="donor-email">Email:</label>
      <input type="email" id="donor-email" placeholder="Enter your email" required>

      <label for="donor-amount">Amount (USD):</label>
      <input type="number" id="donor-amount" placeholder="Enter donation amount" required>

      <label for="donor-txid">Transaction ID:</label>
      <input type="text" id="donor-txid" placeholder="Enter your TXID" required>

      <button id="submit-donation">Payment Made</button>
    </div>

    <div class="custom-alert" id="custom-alert">Please fill all fields before submitting.</div>
    <div class="confirmation" id="confirmation">Thank you, <span id="conf-name"></span>! Your payment has been submitted and is awaiting confirmation.</div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // EmailJS init
  emailjs.init("JSsp83NL8OtnW52tk"); // Your public key

  const wallets = {
    BTC:{address:'bc1qpc5ahjnmvv62y50upf3nw4xc6k8t24yrjy9w8y', qr:'https://chart.googleapis.com/chart?cht=qr&chl=bc1qpc5ahjnmvv62y50upf3nw4xc6k8t24yrjy9w8y&chs=200x200'},
    USDT:{address:'TUYTBFzij5LUtwhgwrmC9MRWrKjLBA9N4G', qr:'https://chart.googleapis.com/chart?cht=qr&chl=TUYTBFzij5LUtwhgwrgwrmC9MRWrKjLBA9N4G&chs=200x200'},
    ETH:{address:'0x737F9370AAC907EefC8f7cC45ABb69cAE7273426', qr:'https://chart.googleapis.com/chart?cht=qr&chl=0x737F9370AAC907EefC8f7cC45ABb69cAE7273426&chs=200x200'},
    USDC:{address:'0x737F9370AAC907EefC8f7cC45ABb69cAE7273426', qr:'https://chart.googleapis.com/chart?cht=qr&chl=0x737F9370AAC907EefC8f7cC45ABb69cAE7273426&chs=200x200'}
  };

  // Show donation section
  const donateBtn = document.getElementById('show-donation');
  donateBtn.addEventListener('click',()=>{
    const section = document.getElementById('donation-section');
    section.style.display='block';
    section.scrollIntoView({behavior:'smooth'});
  });

  // Wallet button clicks
  document.querySelectorAll('.payment-methods button').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const method = btn.getAttribute('data-method');
      const container = document.getElementById('wallet-container');
      const wallet = wallets[method];
      container.innerHTML = `
        <img src="${wallet.qr}" alt="${method} QR">
        <p>${method} Wallet:<br>${wallet.address}</p>
        <button class="copy-btn" onclick="copyAddress('${wallet.address}', this)">Copy</button>
      `;
    });
  });

  // Copy function
  window.copyAddress = function(address, btn){
    navigator.clipboard.writeText(address).then(()=>{
      btn.innerText="Copied ✓";
      btn.classList.add("copied");
      setTimeout(()=>{ btn.innerText="Copy"; btn.classList.remove("copied"); },2000);
    });
  };

  // Submit donation
  document.getElementById('submit-donation').addEventListener('click', function(){
    const name = document.getElementById('donor-name').value;
    const email = document.getElementById('donor-email').value;
    const amount = document.getElementById('donor-amount').value;
    const txid = document.getElementById('donor-txid').value;
    const walletSection = document.getElementById('wallet-container');

    if(!name || !email || !amount || !txid || walletSection.innerHTML===''){
      const alertBox = document.getElementById('custom-alert');
      alertBox.style.display='block';
      setTimeout(()=>{alertBox.style.display='none';},3000);
      return;
    }

    // Send email to admin
    emailjs.send("service_jhvdg4m","template_kkkt4ts",{
      name:name,
      amount:amount,
      method:walletSection.querySelector('p').innerText.split(' Wallet')[0],
      txid:txid,
      email:email
    }).then(()=>{
      console.log('Email sent');
      document.getElementById('conf-name').innerText=name;
      document.getElementById('confirmation').style.display='block';
      document.getElementById('donor-name').value='';
      document.getElementById('donor-email').value='';
      document.getElementById('donor-amount').value='';
      document.getElementById('donor-txid').value='';
    },(err)=>{console.error('Email failed', err);});
  });
});
</script>
</body>
      </html>
